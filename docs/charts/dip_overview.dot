// dot docs/charts/dip_overview.dot -Tpng > docs/charts/dip_overview.png
// requires installation of GraphViz (brew install graphviz, or
// http://www.graphviz.org/Download..php if that doesn't work)

digraph G {
  label="Discovery Index";
  labelloc=t;
  node [style=filled];

  aleph[label="Aleph", color=black, fillcolor=lightgray]
  alephExporter[label="Aleph Metadata Exporter", color=black, fillcolor=green]
  s3[label="AWS S3 Bucket", color=black, fillcolor=darkorange]
  processor[label="Mario: pipeline for metadata indexing", color=black, fillcolor=green]
  index[label="ElasticSearch", color=black, fillcolor=darkorange]
  archives[label="Archival Metadata", color=black, fillcolor=lightgray]
  archivesExporter[label="Archival Metadata Exporter", color=black, fillcolor=yellow]
  futureData[label="Source X, Y, Z, etc", color=black, fillcolor=lightgray]
  futureExporter[label="Source X, Y, Z, etc Metadata Exporter", color=black, fillcolor=yellow]
  websites[label="Library Websites / Guides", color=black, fillcolor=lightgray]
  websitesCrawler[label="Crawler", color=black, fillcolor=yellow]
  api[label="TIMDEX: Local Discovery API", color=black, fillcolor=green]
  eds[label="EDS", color=black, fillcolor=lightgray]
  bento[label="Bento", color=red, fillcolor=lightgray]
  magic[label="Users Doing Cool Stuff?", color=transparent]

  aleph -> alephExporter
  alephExporter -> s3

  s3 -> processor
  processor -> index

  archives -> archivesExporter
  archivesExporter -> s3

  futureData -> futureExporter
  futureExporter -> s3

  websites -> websitesCrawler
  websitesCrawler -> s3

  index -> api
  api -> bento [color=red]
  api -> magic

  eds -> bento

  subgraph clusterLegend {
    label="Key";
    {
     k4[label="Future Project", color=black, fillcolor=yellow];
     k3[label="Cloud Service", color=darkorange];
     k2[label="Current Project", color=black, fillcolor=green];
     k1[label="Existing System", color=black, fillcolor=lightgray];
     k5[label="Spun off Project", color=red, fillcolor=lightgray]
     k1 -> k2 -> k3 -> k4 -> k5 [style=invis]
     }
  }

}
